# CBDCoreDataToolKit

### Special thanks

* [VÃ­ctor Pena Placer](https://github.com/vicpenap/VPPCoreData) for his **VPPCoreData** package
* [user353759](http://stackoverflow.com/users/353759/user353759) of **StackOverflow**

## CBDCoreDataToolKit: cloning, replacing, importing and fetching easily

With **CBDCoreDataToolKit**, you can clone, replace or fetch your NSManagedObject. Cloning is useful when you want to transfer data from a MOC to another one.

### Cloning objects

You want to copy an object from a NSManagedObjectContext (MOC) to another one. **CBDCoreDataToolKit** can do it. It will also copy the objects in relationship with the first object, but you can specify entities or attributes to ignore.

### Replacing an object by another one

Let's say you have a graph with many objects in relation one with another. You want to replace one object in this graph by another one, and of course, you want the graph to stay the same. **CBDCoreDataToolKit** can do it.

### Importing objects
It's a little bit like cloning but it's more powerful. While cloning was pulling all the graph (excepted some parts you can cut off) of an object from a `sourceMOC` to a `targetMOC`, the importing feature is more clever.

#### CBDCoreDataImporter
To import some data, it's easy! 

First, you have to create an instance of CBDCoreDataImporter. You do:

```
CBDCoreDataImporter * myImporter;

myImporter = [CBDCoreDataImporter alloc] initWithSourceMOC:sourceMOC
              						             targetMOC:targetMOC];
```

And then, to import:

```
[myDataImporter import:anObject];
```
It will import `anObject` in `targetMOC` and will try to include it in the graph of already existing objects in `targetMOC`. To do that, CBDCoreDataImporter will have to compare objects in the `sourceMOC` and in the `targetMOC`. This is the aim of CBDCoreDataDiscriminator.

#### CBDCoreDataDiscriminator

An instance of CBDCoreDataDiscriminator aims at comparing objects of a given entity, regarding given attributes and relationships. Instead of testing the equality with `==` or with `isEqual:`, it will use the (given at the initialisation) attributes and relationships.

Some code:

```
CBDCoreDataDiscriminator * myDiscriminator ;

myDiscriminator = [CBDCoreDataDiscriminator alloc] initForEntity:entityPerson
    									    withDiscriminationAttributes:@[@"name", @"surname"]
										 withDiscriminationRelationships:nil] ;
										 								 
[myDataImporter addsDiscrimintor:myDiscriminator] ;

[myDataImporter import:anObject];
```


### Convenience methods for fetching

With CoreData, when you wanna fetch, it's long and repetitive. **CBDCoreDataToolKit** offers you convenience methods to go to the point. These methods accepts format strings, so it is even more convenient. Many other librairies do the same, including the very well known Magical Record. Unfortunately, Magical Record does not work with NSPersistentDocument. **CBDCoreDataToolKit** does.

#### Class methods for subclasses of NSManagedObject for fetching
You can fetch on subclasses of NSManagedObject, if they implement the class method `+ (NSString *)entityName`. This is the case for classes generated by `mogenerator`. If not, it tries to find an NSEntity... whose name is the name of your class.

#### Full support of format string
You will able to do

```
			[Person findInMOC:self.myMOC
      		        orderedBy:@"name, age"
     withPredicateFormat_cbd_:@"city == %@", theCity] ;
```

#### FInding similar objects
Also available:

 ```
 [me findSimilarObjectsForAttributes:@[@"age", @"city"]
 		   			forRelationships:nil
  withAdditionalPredicateFormat_cbd_:@"isMale == NO"] ;
 ```
## Usage

To run the example project; clone the repo, and run `pod install` from the Example directory first.


## Installation

CBDCoreDataToolKit is available through [CocoaPods](http://cocoapods.org), to install
it simply add the following line to your Podfile:

    pod "CBDCoreDataToolKit"



## Author

Colas, colas.bardavid@gmail.com


## Changelog

- 2014/02/12 (v2.0.0): 
  - Introducing the much more hi-tech importer from a MOC to another MOC. Comparing objects on their graph-like identity..
  - New methods for fetching similar objects. 
  - Slight changes  in the names of few methods. 
- 2014/02/11 (v1.0.0): New methods. Few changes in the names of few methods.
- 2014/02/11 (v0.0.2): Improved documentation.
- 2014/02/10 (v0.0.1): First release.

## License 

Copyright (c) 2014 Colas Bardavid


Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


